%
% Konfigurasi LaTeX untuk laporan thesis/ta/skripsi/sp sesuai dengan aturan UI
% 
% @author  Andreas Febrian
% @version 1.03
%
% Terima kasih untuk: 
% 1. Lia Sadita 
% 2. Andre Tampubolon
% 3. Erik Dominikus
%

%
% Konfigurasi ini dibuat dengan menggunakan:
% - konfigurasi laporan TA yang digunakan Fahrurrozi Rahman
% - konfigurasi LaTeX untuk proceeding ICACSIS 2009 yang dibuat oleh Andreas 
%	Febrian dan Andre Tampubolon
% - Laporan Thesis yang dibuat Andreas Febrian
% 


%-----------------------------------------------------------------------------%
% Package
%-----------------------------------------------------------------------------%

%
% From The tocbibind package [author: Peter Wilson, Herries Press]:
% The tocbibind package can be used to add document elements like a 
% bibliography or an index to the Table of Contents. The package is designed 
% to work with the four standard book, report, article and proc classes, and to 
% a limited extent with the ltxdoc class.
% 
\usepackage{tocbibind}

%
% From [Wikipedia]:
% The package hyperref provides LaTeX the ability to create hyperlinks within 
% the document. It works with pdflatex and also with standard "latex" used with 
% dvips and ghostscript or dvipdfm to build a PDF file. For example: 
%	- \hyperref[mainlemma]{lemma \ref{mainlemma}}
%	- \url{http://www.wikibooks.org}
%	- \href{http://www.wikibooks.org}{wikibooks home}
%	- \href{mailto:my_address@wikibooks.org}{
%		\nolinkurl{my_address@wikibooks.org}}
% 
\usepackage{hyperref}
  \hypersetup{
  	colorlinks=false,
  	pdfborder=0 0 0,
  	linkcolor=blue,
  	citecolor=black,
  	bookmarksopen=false,
  	bookmarksnumbered=true,
  	pdfstartview=FitH,
  	pdfview=FitH
	}

%
% The url package allows spacing and line breaks that result in intelligent 
% printing of email addresses, hypertext links, and path or directory addresses. 
% You must enter package commands in TeX fields. The address, link, path, or 
% directory address specified in the command must not contain unbalanced braces. 
% If it doesn't contain certain other characters (such as % or #) and doesn't 
% end with a backslash, you can use the command in the argument to another 
% command.
% 
\usepackage{url}
  \urlstyle{same}
  
% 
%  Agar tabel bisa menggunakan rowspan atau colspan. 
% 

%
% Digunakan untuk memasukan gambar ke laporan. 
% 
\usepackage{graphicx}

%tabularx untuk membuat tabel yang ukurannya bisa disesuaikan dengan lebar halaman
\usepackage{tabularx}
%
% Digunakan untuk mengantur line spacing pada laporan. Umumnya spacing yang 
% digunakan adalah 1.5. 
% 
\usepackage{setspace}
  \onehalfspacing
  %\doublespacing
  %\singlespacing
  
%
% From Rforge:
% The geometry package controls the overall margins and text area of the 
% document. The package must be called in the preamble of the document and 
% specified when called.
% 
\usepackage[paper=a4paper,headheight=0pt,left=3.5cm,top=3cm,right=3cm,bottom=3cm]{geometry}

% 
% Digunakan untuk mengatur caption dalam dokumen.
% 
% \usepackage[font=footnotesize,format=plain,labelfont=bf,up,textfont=up]{caption}

% 
% Membantu penulisan notasi matematika terutama untuk dokumen dengan banyak 
% rumus. 
% 
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{bm}

\usepackage{microtype} % untuk mengatur spasi pada paragraf

\usepackage{subcaption} % untuk subfigure
% 
% Membuat seluruh tulisan menjadi Times New Roman.
% 
\usepackage{pslatex}

% 
% Package untuk membuat header dan footer pada dokumen. 
% 
\usepackage{fancyhdr}
\fancypagestyle{plain}{% 
    \fancyhf{} % Bersihkan header dan footer
    \fancyfoot[R]{\thepage} % Nomor halaman di kanan bawah
    \renewcommand{\headrulewidth}{0pt} % Hilangkan garis header
    \renewcommand{\footrulewidth}{0pt} % Hilangkan garis footer
}
% 
% Package untuk memasukan berkas pdf sebagai bagian dari dokumen.
% 
\usepackage{pdfpages}

% 
% Membantu dalam mengatur jarak antara tepi kertas dengan posisi header. 
% 
\usepackage[ConnyRevised]{_internals/fncychap}

% 
% Digunakan untuk membuat tabel berwarna-warni. 
% 
\usepackage{colortbl}

% Agar bisa menggunakan compactitem
\usepackage{paralist} %it's me!
% 
% 
% 
\usepackage{floatrow}
  \floatplacement{figure}{H}
  \floatplacement{table}{H}
  \floatsetup[table]{capposition=top}

% Bibliography
% \usepackage{natbib}
\usepackage[backend=biber,style=apa,url=true]{biblatex}  % Menggunakan BibLaTeX
% Set jarak antar item dalam daftar pustaka
\setlength{\bibitemsep}{0.25\baselineskip} % Menambah jarak antar item

% Set jarak sebelum daftar pustaka dimulai
% \def\bibsetup{
%   \vskip 1.5em
% }

\addbibresource{pustaka.bib}

\usepackage[table,xcdraw]{xcolor}  % Untuk warna pada tabel
\usepackage{multirow}  % Untuk multirow pada tabel
\usepackage{booktabs}


% Slanted fraction symbol
\usepackage{nicefrac}

% Code listing
\usepackage[titles]{tocloft}
\newlistof{listing}{lol}{Daftar Kode}
\usepackage{caption}
% \usepackage[newfloat]{minted}
% \SetupFloatingEnvironment{listing}{name=\bo{Kode}}
% \setminted{
% 	style=pastie,
% 	autogobble,
% 	linenos,
% 	fontsize=\footnotesize,
% 	breaklines,
% 	breakanywhere,
% 	python3,
% }

% \renewcommand{\theFancyVerbLine}{{\tiny{\arabic{FancyVerbLine}}}}
	
% Set `listing` numbering to [chapter].[listing_num]
\makeatletter
\renewcommand*{\thelisting}{\thechapter.\arabic{listing}}
\@addtoreset{listing}{chapter}
\makeatother

% Set listing frame
\usepackage[framemethod=TikZ]{mdframed}
\definecolor{code_bg}{rgb}{0.95,0.95,0.95}
\mdfdefinestyle{code}{
	backgroundcolor=code_bg,
	roundcorner=2pt,
	linewidth=0pt
}
\surroundwithmdframed[style=code]{minted}


\renewcommand{\cftlistingpresnum}{\bo{Kode}~}
\setlength{\cftlistingnumwidth}{1in}

\renewcommand{\cftfigpresnum}{\figurename~}
\setlength{\cftfignumwidth}{1in}

\renewcommand{\cfttabpresnum}{\tablename~}
\setlength{\cfttabnumwidth}{1in}

%-----------------------------------------------------------------------------%
% Konfigurasi
%-----------------------------------------------------------------------------%
\sloppy

\newif\ifpdf
\ifx\pdfoutput\undefined
   \pdffalse 
\else
   \pdfoutput=1
   \pdftrue
\fi


% link page numbers in TOC 
\makeatletter
\def\contentsline#1#2#3#4{%
  \ifx\\#4\\%
    \csname l@#1\endcsname{#2}{#3}%
  \else
    \csname l@#1\endcsname{%
      \hyper@linkstart{link}{#4}{#2}\hyper@linkend
    }{%
      % same link destination for the page:
      \hyper@linkstart{link}{#4}{#3}\hyper@linkend
      % link destination is the page itself:
      % \hyperpage{#3}%
    }%
  \fi
}
\renewcommand\section{\@startsection {section}{1}{\z@}%
                                  {-3.5ex \@plus -1ex \@minus -.2ex}%
                                  {2.3ex \@plus.2ex}%
                                  {\large\bfseries}}
\makeatother

\setcounter{secnumdepth}{3}

\setcounter{tocdepth}{3}

% Mengubah gaya entri chapter di daftar isi (non-bold dan titik-titik)
\renewcommand{\cftchapdotsep}{\cftdotsep}   % Titik-titik untuk chapter
\renewcommand{\cftdotsep}{0.5}

\setlength{\parindent}{1.25cm}

\addtocontents{toc}{~\hfill \textit{Halaman}\par} % Menambahkan kata "Halaman" di sebelah kanan daftar isi

% Membuat juga kata "halaman" di daftar gambar dan daftar tabel
\addtocontents{lof}{~\hfill \textit{Halaman}\par}
\addtocontents{lot}{~\hfill \textit{Halaman}\par}

% \captionsetup[figure]{labelfont={normalfont}, textfont={normalfont}} % Unbold caption gambar
% \captionsetup[table]{labelfont={normalfont}, textfont={normalfont}} % Unbold caption tabel
%
% Atur header dan footer dalam dokumen.
% 
\fancyhf{} % Bersihkan header dan footer
% \fancyhead[L]{} % Kosongkan header kiri
% \fancyhead[C]{} % Kosongkan header tengah
% \fancyfoot[R]{\thepage} % Nomor halaman di kanan bawah
% \fancyfoot[L]{\footnotesize \textsf{\bo{Universitas Indonesia}}} % Teks "Universitas Indonesia" di kiri bawah
\renewcommand{\headrulewidth}{0.0pt} % Hilangkan garis header
\renewcommand{\footrulewidth}{0.0pt} % Hilangkan garis footer
\pagestyle{fancy}
\fancypagestyle{plain}{%
    \fancyhf{} % Bersihkan header dan footer
    \fancyfoot[C]{\thepage} % Nomor halaman di kanan bawah
    \renewcommand{\headrulewidth}{0pt} % Hilangkan garis header
    \renewcommand{\footrulewidth}{0pt} % Hilangkan garis footer
}

% \setlength{\footskip}{2cm} % Atur jarak footer menjadi 2 cm dari tepi bawah halaman
% Mengatur jarak antara judul bab dan baris pertama atau subjudul

\usepackage{titlesec}
% \titlespacing*{\chapter}{0pt}{0pt}{3\baselineskip}

% jarak antara judul section dan baris pertama paragraf 
\titlespacing*{\section}{0pt}{1ex plus 0.5ex minus 0.5ex}{0.5ex}
% jarak antara judul subsection dan baris pertama paragraf
\titlespacing*{\subsection}{0pt}{3.5ex plus 0.5ex minus 0.5ex}{0.5ex}
% jarak antara judul subsubsection dan baris pertama paragraf
\titlespacing*{\subsubsection}{0pt}{3.25ex plus 0.5ex minus 0.5ex}{0.5ex}

\usepackage{indentfirst} % Indentasi pada paragraf pertama

\titleformat{\section}{\normalfont\bfseries\uppercase}{\thesection}{1.7em}{} % Untuk membuat section menjadi kapital tapi daftar isi tetap non kapital

% Untuk subsection set saja jaraknya 1.5em (ga perlu buat kapital seperti section)
\titleformat{\subsection}{\normalfont\bfseries}{\thesubsection}{0.9em}{}

% jarak antara chapter dan judul vertikal
\makeatletter
\renewcommand{\@makechapterhead}[1]{%
  {\parindent \z@ \centering \normalfont
    \ifnum \c@secnumdepth >\m@ne
        \large\bfseries \@chapapp\space \thechapter
        \par\nobreak
        \vskip -0.2cm
    \fi
    \interlinepenalty\@M
    \large \bfseries #1\par\nobreak
    \vskip 20\p@
    }}

\@addtoreset {equation}{chapter}
\renewcommand\theequation
  {\ifnum \c@chapter>\z@ \@arabic\c@chapter.\fi \@arabic\c@equation}
\renewcommand \thefigure
     {\ifnum \c@chapter>\z@ \@arabic\c@chapter.\fi \@arabic\c@figure}
\renewcommand \thetable
     {\ifnum \c@chapter>\z@ \@arabic\c@chapter.\fi \@arabic\c@table}


\makeatother
%-----------------------------------------------------------------------------%
% Perintah Baru
%-----------------------------------------------------------------------------%

% 
% Perintah untuk membuat huruf tecetak miring. (alias)
\newcommand{\f}[1]{\textit{#1}}
% 
% Perintah untuk huruf tercetak tebal dan miring. 
\newcommand{\bi}[1]{\textbf{\textit{#1}}}
% 
% Perintah untuk huruf tercetak tebal.
\newcommand{\bo}[1]{\textbf{#1}}
% 
% 
\newcommand{\m}[1]{\bm{#1}}
% 
% 
\newcommand{\code}[1]{{\texttt{#1}}}
% 
% Buat catatan kecil. Catatan akan ditampilkan dalam tabel. 
\newcommand{\todo}[1]{
    \begin{tabular}{| p{13.5cm} |}
		\rowcolor[rgb]{.9,.6,.6}
		\bo{@todo} \\
		\rowcolor[gray]{1.}
		 #1 \\
		 \\
		\hline
	\end{tabular}
    }
% 
% Buat catatan untuk menambahkan referensi. 
\newcommand{\todoCite}{
	\begin{tabular}{| l |}
		\rowcolor[rgb]{.6,.9,.6}
		\bo{@todo} \\
		\rowcolor[gray]{1.} 
		 Referensi \\
		 \\
		\hline
	\end{tabular}
    }
% 
% Tambahkan berkas PDF ke dalam laporan dan gunakan style laporan  
% terhadap berkas ini. 
\newcommand{\inpdf}[1]{
	\includepdf[pages=-,pagecommand={\thispagestyle{fancy}}]{#1.pdf}}
% 
% Tambahkan berkas PDF ke dalam laporan. 
\newcommand{\putpdf}[1]{\includepdf[pages=-]{#1.pdf}}
% 
% Perintah untuk membuat perintah/variabel baru. 
\newcommand{\var}[2]{\newcommand{#1}{#2}}
% 
% Perintah untuk membuat perintah/variabel baru. Teks yang ditulis dalam 
% perintah ini akan diformat ulang menggunakan huruf kapital. 
\newcommand{\Var}[2]{\newcommand{#1}{\uppercase{#2}}}

% Bold pada chapter
\newcommand*{\enableboldchapterintoc}{%
  \addtocontents{toc}{\string\renewcommand{\protect\cftchapfont}{\protect\normalfont\protect\bfseries}}
  \addtocontents{toc}{\string\renewcommand{\protect\cftchappagefont}{\protect\normalfont\protect}}
  \addtocontents{toc}{\protect\setlength{\cftbeforechapskip}{12pt}}
}
\newcommand*{\disableboldchapterintoc}{%
  \addtocontents{toc}{\string\renewcommand{\protect\cftchappagefont}{\protect\normalfont}}
  \addtocontents{toc}{\string\renewcommand{\protect\cftchapfont}{\protect\normalfont}}
  \addtocontents{toc}{\protect\setlength{\cftbeforechapskip}{0pt}}
}

% 
% Tambahkan kata-kata yang dimasukan kedalam Table of Contents. 
% Atur jarak dan indentasi untuk \addChapter
\newcommand{\addChapter}[1]{%
  \disableboldchapterintoc
  \phantomsection
  \addcontentsline{toc}{chapter}{#1}%
  \enableboldchapterintoc
}

% Agar ada tulisan BAB pada TOC
\renewcommand\cftchappresnum{BAB } 
  \cftsetindents{chapter}{0em}{4.5em} %indenting bab
  \cftsetindents{section}{4.5em}{2em}
  \cftsetindents{subsection}{6.5em}{3em}
  
% 
% Alias untuk perintah \LaTeX
\newcommand{\latex}{\LaTeX}

% Mengubah format bab menjadi angka Romawi
\renewcommand{\thechapter}{\Roman{chapter}}  % Bab dalam format angka Romawi

% Section dan Subsection tetap menggunakan angka Arab, dengan format bab.section
\renewcommand{\thesection}{\arabic{chapter}.\arabic{section}}  % Section dalam format bab.section
\renewcommand{\thesubsection}{\arabic{chapter}.\arabic{section}.\arabic{subsection}}  % Subsection dalam format bab.section.subsection
\renewcommand{\thesubsubsection}{\arabic{chapter}.\arabic{section}.\arabic{subsection}.\arabic{subsubsection}}  % Subsubsection dalam format bab.section.subsection.subsubsection

%-----------------------------------------------------------------------------%
% Ubah Istilah Penulisan
%-----------------------------------------------------------------------------%
%
% Beberapa istilah yang tepat untuk digunakan dalam laporan.
\renewcommand{\bibname}{Daftar Kepustakaan}
% 
% 
\renewcommand{\contentsname}{Daftar Isi}
% 
% 
\renewcommand{\listfigurename}{Daftar Gambar}
% 
% 
\renewcommand{\listtablename}{Daftar Tabel}
% 
% 
\renewcommand{\chaptername}{BAB}
% 
% 
\renewcommand{\figurename}{Gambar}
% 
% 
\renewcommand{\tablename}{Tabel}
% 
% 
\newcommand{\pic}{Gambar}
% 
% 
\newcommand{\tab}{Tabel}
% 
% 
\newcommand{\equ}{Persamaan}
% 
% 
% Membuat daftar lampiran baru
\newcommand{\listappendicesname}{DAFTAR LAMPIRAN}
\newlistof{appendices}{loa}{\listappendicesname}
\newcommand{\appendices}[1]{\addcontentsline{loa}{appendices}{#1}}

% Membuat counter khusus untuk lampiran
\newcounter{appendixcounter}
\renewcommand{\theappendixcounter}{\arabic{appendixcounter}} % Gunakan format angka (1, 2, 3, ...)

% Definisi ulang perintah addappendix
\newcommand{\addappendix}[1]{
    \stepcounter{appendixcounter} % Tambah nomor lampiran
    \section*{Lampiran \theappendixcounter. #1} % Format: Lampiran 1. Judul
    \addcontentsline{loa}{appendices}{Lampiran \theappendixcounter. #1} % Tambahkan ke daftar lampiran
}
\addtocontents{loa}{~\hfill \textit{Halaman}\par}